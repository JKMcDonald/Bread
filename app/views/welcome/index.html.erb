<html>
  <body class='beige'>
    <!-- Example existing Checkout HTML -->
    <p>Checkout below:</p>
    <hr/>
    <h1> DBPOWER T20 Mini Projector Home Theater! </h1>

    <img id="image" src="https://images-na.ssl-images-amazon.com/images/I/411utAweOUL._SL500_AC_SS350_.jpg" alt="Projector"/>
    <p> Sale: $100 </p>

    <!-- Include our button within a form for seamless integration -->
    <form id="checkout-form" action="checkout" method="post">
      <!-- Note that you must pass a div element -->
    
      <div id="bread-checkout-btn" data-bread-default-size=true></div>

    </form>

        <!-- Load the bread.js script (this can be here or usually in the head) -->
    <script src="https://checkout-sandbox.getbread.com/bread.js" data-api-key="7101ea30-8ae3-47ab-a8bd-235860d36f3e"></script>

    <!-- Create the `opts` object -->
    <script type='text/javascript'>
      var cart = {products:  [{name: "Mini Projector", price: 100, sku: "0349j0394fj", detailUrl: "https://www.amazon.com/DBPOWER-T20-Projector-Multimedia-Smartphone/dp/B01LZRUY6Q/ref=pd_lpo_vtph_229_bs_tr_img_1?_encoding=UTF8&psc=1&refRID=ZMXPZ67AYGWG50ACJX57", quantity: 1}]}
      var items = [];
      // We will assume you have a `cart` object which has `products`
      // the shopper has chosen.
      var itemTotal = 0;
      cart.products.forEach(function (p) {
        itemTotal += parseInt((p.price * 100)) * parseInt(p.quantity);
        items.push(
          {
            name: p.name,                       // required
            price: parseInt( (p.price * 100) ), // required (value in cents USD)
            sku: p.sku,                         // required
            imageUrl: p.imgUrl,                 // optional
            detailUrl: p.detailUrl,             // required
            quantity: parseInt(p.quantity)      // required
          }
        );
      });

      // If you have their shipping address already, you can pass it to us
      // so they do not have to fill it out again.
      var shippingContact = {
        firstName: 'Kyle',
        lastName: 'McDonald',
        address:  '225 East 95th street',
        address2: '1D',
        zip:      '24321',
        phone:    '9144177703',
        city:     'NewYork',
        state:    'NY',
      };

      // Likewise, if you have the billing contact, you can pass it in to us
      // so they do not have to.
      var billingContact = {
        email:      'kyle2mcdonald@gmail.com',
        firstName:  'Kyle',
        lastName:   'McDonald',
        address:    '225 East 95th street',
        address2:   'Apt. 1D',
        zip:        '24321',
        phone:     '9144177703',
        city:       'Charleston', 
        state:      'SC', 
      };

      // var billingContact = {
      //   email:      'jane.doe@geocities.com',
      //   firstName:  'Jane',
      //   lastName:   'Doe',
      //   address:    '123 Test St.',
      //   address2:   'Apt. 4',
      //   zip:        '11238',
      //   phone:     '5555555555',
      // };

      // Below, we will build the required opts object.
      var opts = {
        customCSS: 'html,body,.bread-embed{margin:0;padding:0;position:absolute;top:0;right:0;bottom:0;left:0;font-family:sans-serif}.bread-embed{visibility:hidden}.bread-btn{border:2px solid #055170;border-radius:8px;background:#fff;font-size:13px;color:red;cursor:pointer}.bread-btn .bread-embed-inner{position:absolute;top:0;left:0;right:50px;bottom:0;padding:0 1em}.bread-btn .bread-embed-icon{position:absolute;top:-1px;right:-51px;bottom:-1px;left:100%;margin-left:-50px;margin-right:50px;background-color:#055170;background-repeat:no-repeat;background-image:url(assets/coin.svg);background-position:center;background-size:auto 30px;border-radius:0 4px 4px 0;cursor:pointer}.bread-btn .bread-pot:before{content:"Pay over time";color:red}.bread-dur{text-transform:uppercase}.bread-as-low-as .bread-as-low-as-info{z-index:1000;font-size:1.25em;font-weight:700;padding:3px}.bread-btn.bread-as-low-as .bread-as-low-as:before,.bread-label .bread-as-low-as:before{content:"As low as";color:red;margin-right:.5em}.bread-btn.bread-show-terms .bread-for:before,.bread-label .bread-for:before{content:"for";color:#000;margin-right:.5em}.bread-btn.bread-show-terms .bread-for:before{color:red}.bread-btn.bread-show-terms .bread-pot:before{color:#055170}.bread-center{text-align:center;vertical-align:middle;height:100%;width:100%;display:table}.bread-center-inner{display:table-cell;vertical-align:middle}.bread-label{color:#000;text-align:center}.bread-label .bread-embed-inner{display:inline-block;vertical-align:middle;height:100%}.bread-label .bread-embed-icon{vertical-align:middle;display:inline-block;background:#ef8919;border-radius:100%;width:1.25em;height:1.25em;color:#fff;line-height:1.5em;font-size:.85em;margin-top:-.2em}.bread-label .bread-embed-icon:after{content:"i"}@media only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx){.bread-btn .bread-embed-icon{background-image:url(assets/coin.svg)}}',
        buttonId: 'bread-checkout-btn',
        asLowAs: true,
        items: items,
        // Optional Array of Shipping Options
        shippingOptions: [
          {
            type: '2-day shipping',
            typeId: '2D_001',
            cost: 1350,
          },
          {
            type: 'Overnight',
            typeId: 'O_002',
            cost: 2000,
          }
        ],
        Tax: function() {
          if (shippingContact.state == "NY") {
              return (itemTotal * 0.05)
              }
              else {
                return 0
              } 
              }(),// optional
       
        shippingContact: shippingContact,
        billingContact: billingContact,
        done: function(err, txToken) {
          
            window.location = '/confirm?token=' + txToken; 
          }
        };

      // We will assume your `cart` object has the `total`
      // dollar amount of products in the cart.
      if (cart.total > 2000) {
        // Use a non-default Targeted Financing Program for carts over $2000
        opts.financingProgramId = '38a968d8-da0b-44be-8d7d-d2817c954c29';
      }

      // Lastly, call `checkout` with `opts` as the argument.
      bread.checkout(opts);
    </script>

  </body>
</html>